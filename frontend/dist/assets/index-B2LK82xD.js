import{d as O,c as j,a as m,b as e,w as l,y as A,n as b,j as r,k as F,r as o,z as I,o as v,i,t as _,v as L,E as M}from"./index-DejdUQV-.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"procurement"},J={class:"toolbar"},K={class:"filter-group"},Q={class:"pagination"},R=O({__name:"index",setup(W){const k=r(!1),g=r(1),f=r(20),w=r(0),d=F({status:"",keyword:""}),x=r([{id:1,order_no:"PO-2024-001",material_name:"4mm铝合金板",quantity:200,unit:"平米",total_price:56e3,supplier:"中铝",status:"delivered",delivery_date:"2024-01-20"},{id:2,order_no:"PO-2024-002",material_name:"铝合金焊丝",quantity:500,unit:"kg",total_price:17500,supplier:"大西洋",status:"pending_approval",delivery_date:"2024-02-15"}]),C=n=>({draft:"info",pending_approval:"warning",approved:"success",ordered:"primary",delivered:"success",cancelled:"info"})[n]||"info",V=n=>({draft:"草稿",pending_approval:"待审批",approved:"已审批",ordered:"已下单",delivered:"已到货",cancelled:"已取消"})[n]||n,h=()=>{},z=n=>{n.status="approved",M.success("审批通过")},S=n=>{},P=n=>{};return(n,a)=>{const q=o("Plus"),y=o("el-icon"),u=o("el-button"),c=o("el-option"),B=o("el-select"),E=o("Search"),N=o("el-input"),s=o("el-table-column"),U=o("el-tag"),D=o("el-table"),T=o("el-pagination"),$=I("loading");return v(),j("div",H,[m("div",J,[e(u,{type:"primary",onClick:h},{default:l(()=>[e(y,null,{default:l(()=>[e(q)]),_:1}),a[4]||(a[4]=i(" 新建采购申请 ",-1))]),_:1}),m("div",K,[e(B,{modelValue:d.status,"onUpdate:modelValue":a[0]||(a[0]=t=>d.status=t),placeholder:"状态",clearable:"",style:{width:"120px"}},{default:l(()=>[e(c,{label:"待审批",value:"pending_approval"}),e(c,{label:"已审批",value:"approved"}),e(c,{label:"已下单",value:"ordered"}),e(c,{label:"已到货",value:"delivered"})]),_:1},8,["modelValue"]),e(N,{modelValue:d.keyword,"onUpdate:modelValue":a[1]||(a[1]=t=>d.keyword=t),placeholder:"搜索采购单号/物料",style:{width:"250px"},clearable:""},{prefix:l(()=>[e(y,null,{default:l(()=>[e(E)]),_:1})]),_:1},8,["modelValue"])])]),A((v(),b(D,{data:x.value},{default:l(()=>[e(s,{prop:"order_no",label:"采购单号",width:"150"}),e(s,{prop:"material_name",label:"物料名称","min-width":"180"}),e(s,{prop:"quantity",label:"数量",width:"100"},{default:l(({row:t})=>[i(_(t.quantity)+" "+_(t.unit),1)]),_:1}),e(s,{prop:"total_price",label:"总价",width:"120"},{default:l(({row:t})=>{var p;return[i(" ¥"+_((p=t.total_price)==null?void 0:p.toFixed(2)),1)]}),_:1}),e(s,{prop:"supplier",label:"供应商",width:"150"}),e(s,{prop:"status",label:"状态",width:"100"},{default:l(({row:t})=>[e(U,{type:C(t.status)},{default:l(()=>[i(_(V(t.status)),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"delivery_date",label:"交货日期",width:"120"}),e(s,{label:"操作",width:"200",fixed:"right"},{default:l(({row:t})=>[t.status==="pending_approval"?(v(),b(u,{key:0,link:"",type:"success",onClick:p=>z(t)},{default:l(()=>[...a[5]||(a[5]=[i("审批",-1)])]),_:1},8,["onClick"])):L("",!0),e(u,{link:"",type:"primary",onClick:p=>S(t)},{default:l(()=>[...a[6]||(a[6]=[i("查看",-1)])]),_:1},8,["onClick"]),e(u,{link:"",type:"primary",onClick:p=>P(t)},{default:l(()=>[...a[7]||(a[7]=[i("编辑",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,k.value]]),m("div",Q,[e(T,{"current-page":g.value,"onUpdate:currentPage":a[2]||(a[2]=t=>g.value=t),"page-size":f.value,"onUpdate:pageSize":a[3]||(a[3]=t=>f.value=t),total:w.value,layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50,100]},null,8,["current-page","page-size","total"])])])}}}),Z=G(R,[["__scopeId","data-v-3da32584"]]);export{Z as default};
//# sourceMappingURL=index-B2LK82xD.js.map
