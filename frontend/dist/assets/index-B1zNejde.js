import{d as ae,c as $,a as d,b as e,w as o,y as ne,n as A,j as i,k as B,r as a,z as se,o as w,i as s,t as p,v as L,D as N,E as S}from"./index-DejdUQV-.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"materials"},de={class:"toolbar"},re={class:"filter-group"},me={class:"material-name"},pe={class:"name"},ce={class:"stock-info"},_e={key:0,class:"warning-icon"},fe={class:"pagination"},ve={class:"stock-actions"},be=ae({__name:"index",setup(ke){const P=i(!1),z=i(1),q=i(20),T=i(0),k=B({category:"",keyword:""}),F=i([{id:1,code:"AL-001",name:"4mm铝合金板",brand:"CCS",model:"5083-H116",unit:"平米",unit_cost:280,supplier:"中铝",stock:150,min_stock:100},{id:2,code:"AL-002",name:"铝合金型材",brand:"CCS",model:"6061-T6",unit:"米",unit_cost:45,supplier:"中铝",stock:80,min_stock:500},{id:3,code:"WELD-001",name:"铝合金焊丝",brand:"ER5356",model:"1.2mm",unit:"kg",unit_cost:35,supplier:"大西洋",stock:200,min_stock:50}]),f=i(!1),g=i("in"),C=i(!1),r=i(null),x=i(0),n=B({quantity:1,warehouse:"main",location:"",batch_no:"",remark:""}),I=()=>{},M=()=>{},j=u=>{},H=u=>{},R=u=>{r.value=u,x.value=u.stock||0,g.value="in",n.quantity=1,n.warehouse="main",n.location="",n.batch_no="",n.remark="",f.value=!0},W=async()=>{C.value=!0;try{await new Promise(u=>setTimeout(u,500)),g.value==="in"?(r.value.stock+=n.quantity,S.success("入库成功")):(r.value.stock-=n.quantity,S.success("出库成功")),f.value=!1}catch(u){S.error(u.message||"操作失败")}finally{C.value=!1}};return(u,t)=>{var h;const G=a("Plus"),U=a("el-icon"),c=a("el-button"),J=a("Upload"),_=a("el-option"),D=a("el-select"),K=a("Search"),y=a("el-input"),m=a("el-table-column"),O=a("el-tag"),Q=a("el-table"),X=a("el-pagination"),V=a("el-descriptions-item"),Y=a("el-descriptions"),E=a("el-radio-button"),Z=a("el-radio-group"),ee=a("el-input-number"),v=a("el-form-item"),le=a("el-form"),te=a("el-dialog"),oe=se("loading");return w(),$("div",ue,[d("div",de,[e(c,{type:"primary",onClick:I},{default:o(()=>[e(U,null,{default:o(()=>[e(G)]),_:1}),t[12]||(t[12]=s(" 新建物料 ",-1))]),_:1}),e(c,{onClick:M},{default:o(()=>[e(U,null,{default:o(()=>[e(J)]),_:1}),t[13]||(t[13]=s(" 批量导入 ",-1))]),_:1}),d("div",re,[e(D,{modelValue:k.category,"onUpdate:modelValue":t[0]||(t[0]=l=>k.category=l),placeholder:"分类",clearable:"",style:{width:"150px"}},{default:o(()=>[e(_,{label:"铝合金",value:"aluminum"}),e(_,{label:"焊接材料",value:"welding"}),e(_,{label:"电气",value:"electrical"}),e(_,{label:"涂料",value:"paint"})]),_:1},8,["modelValue"]),e(y,{modelValue:k.keyword,"onUpdate:modelValue":t[1]||(t[1]=l=>k.keyword=l),placeholder:"搜索物料名称/编码",style:{width:"250px"},clearable:""},{prefix:o(()=>[e(U,null,{default:o(()=>[e(K)]),_:1})]),_:1},8,["modelValue"])])]),ne((w(),A(Q,{data:F.value},{default:o(()=>[e(m,{prop:"code",label:"物料编码",width:"120"}),e(m,{prop:"name",label:"物料名称","min-width":"180"},{default:o(({row:l})=>[d("div",me,[d("span",pe,p(l.name),1),l.brand?(w(),A(O,{key:0,size:"small",type:"info"},{default:o(()=>[s(p(l.brand),1)]),_:2},1024)):L("",!0)])]),_:1}),e(m,{prop:"model",label:"型号/规格",width:"150"}),e(m,{prop:"unit",label:"单位",width:"80"}),e(m,{prop:"unit_cost",label:"单价",width:"100"},{default:o(({row:l})=>{var b;return[s(" ¥"+p((b=l.unit_cost)==null?void 0:b.toFixed(2)),1)]}),_:1}),e(m,{prop:"supplier",label:"供应商",width:"150"}),e(m,{label:"库存",width:"120"},{default:o(({row:l})=>[d("div",ce,[d("span",{class:N({"stock-warning":l.stock<l.min_stock})},p(l.stock||0),3),l.stock<l.min_stock?(w(),$("span",_e,"⚠️")):L("",!0)])]),_:1}),e(m,{label:"操作",width:"200",fixed:"right"},{default:o(({row:l})=>[e(c,{link:"",type:"primary",onClick:b=>j(l)},{default:o(()=>[...t[14]||(t[14]=[s("查看",-1)])]),_:1},8,["onClick"]),e(c,{link:"",type:"primary",onClick:b=>H(l)},{default:o(()=>[...t[15]||(t[15]=[s("编辑",-1)])]),_:1},8,["onClick"]),e(c,{link:"",type:"success",onClick:b=>R(l)},{default:o(()=>[...t[16]||(t[16]=[s("库存",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[oe,P.value]]),d("div",fe,[e(X,{"current-page":z.value,"onUpdate:currentPage":t[2]||(t[2]=l=>z.value=l),"page-size":q.value,"onUpdate:pageSize":t[3]||(t[3]=l=>q.value=l),total:T.value,layout:"total, sizes, prev, pager, next","page-sizes":[10,20,50,100]},null,8,["current-page","page-size","total"])]),e(te,{modelValue:f.value,"onUpdate:modelValue":t[11]||(t[11]=l=>f.value=l),title:`库存管理 - ${(h=r.value)==null?void 0:h.name}`,width:"700px"},{footer:o(()=>[e(c,{onClick:t[10]||(t[10]=l=>f.value=!1)},{default:o(()=>[...t[19]||(t[19]=[s("取消",-1)])]),_:1}),e(c,{type:"primary",onClick:W,loading:C.value},{default:o(()=>[...t[20]||(t[20]=[s("确认",-1)])]),_:1},8,["loading"])]),default:o(()=>[e(Y,{column:2,border:"",class:"material-info"},{default:o(()=>[e(V,{label:"物料编码"},{default:o(()=>{var l;return[s(p((l=r.value)==null?void 0:l.code),1)]}),_:1}),e(V,{label:"型号"},{default:o(()=>{var l;return[s(p((l=r.value)==null?void 0:l.model),1)]}),_:1}),e(V,{label:"当前库存"},{default:o(()=>{var l;return[d("span",{class:N({"stock-warning":x.value<((l=r.value)==null?void 0:l.min_stock)})},p(x.value),3)]}),_:1}),e(V,{label:"安全库存"},{default:o(()=>{var l;return[s(p((l=r.value)==null?void 0:l.min_stock),1)]}),_:1})]),_:1}),d("div",ve,[e(Z,{modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=l=>g.value=l)},{default:o(()=>[e(E,{label:"in"},{default:o(()=>[...t[17]||(t[17]=[s("入库",-1)])]),_:1}),e(E,{label:"out"},{default:o(()=>[...t[18]||(t[18]=[s("出库",-1)])]),_:1})]),_:1},8,["modelValue"])]),e(le,{model:n,"label-width":"100px"},{default:o(()=>[e(v,{label:"数量"},{default:o(()=>[e(ee,{modelValue:n.quantity,"onUpdate:modelValue":t[5]||(t[5]=l=>n.quantity=l),min:1,precision:2},null,8,["modelValue"])]),_:1}),e(v,{label:"仓库"},{default:o(()=>[e(D,{modelValue:n.warehouse,"onUpdate:modelValue":t[6]||(t[6]=l=>n.warehouse=l),placeholder:"选择仓库"},{default:o(()=>[e(_,{label:"主仓库",value:"main"}),e(_,{label:"材料库",value:"material"}),e(_,{label:"成品库",value:"finished"})]),_:1},8,["modelValue"])]),_:1}),e(v,{label:"库位"},{default:o(()=>[e(y,{modelValue:n.location,"onUpdate:modelValue":t[7]||(t[7]=l=>n.location=l),placeholder:"如：A-01-02"},null,8,["modelValue"])]),_:1}),e(v,{label:"批次号"},{default:o(()=>[e(y,{modelValue:n.batch_no,"onUpdate:modelValue":t[8]||(t[8]=l=>n.batch_no=l),placeholder:"可选"},null,8,["modelValue"])]),_:1}),e(v,{label:"备注"},{default:o(()=>[e(y,{modelValue:n.remark,"onUpdate:modelValue":t[9]||(t[9]=l=>n.remark=l),type:"textarea",rows:"2"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Ve=ie(be,[["__scopeId","data-v-06b7ac94"]]);export{Ve as default};
//# sourceMappingURL=index-B1zNejde.js.map
