import{d as z,c as o,a,b as d,w as r,C as F,F as f,m as g,j as m,q as T,r as i,o as n,i as v,n as $,D as k,t as p,x as w,v as B,G as c}from"./index-DejdUQV-.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"gantt-page"},E={class:"toolbar"},G={class:"task-list"},I={class:"task-body"},P={class:"cell"},W={class:"cell task-name"},H={class:"cell"},J={class:"cell"},K={class:"timeline"},O={class:"timeline-header"},Q={class:"timeline-body"},X={class:"task-label"},Z=z({__name:"gantt",setup(ee){const b=m(1),h=m("week"),S=m(),M=m([{id:1,yacht_name:"海鹰号"},{id:2,yacht_name:"蓝鲸号"}]),V=m([{id:1,task_no:"1.1",name:"飞桥结构设计交付",level:1,status:"completed",progress_percent:100,manager_name:"张三",plan_start:"2024-01-15",plan_end:"2024-02-15",children:[]},{id:2,task_no:"1.2",name:"船体结构生产放样及制作",level:1,status:"in_progress",progress_percent:65,manager_name:"李四",plan_start:"2024-02-01",plan_end:"2024-04-30",children:[{id:21,task_no:"1.2.1",name:"放样",level:2,status:"completed",progress_percent:100,manager_name:"王五",plan_start:"2024-02-01",plan_end:"2024-02-15"},{id:22,task_no:"1.2.2",name:"下料",level:2,status:"in_progress",progress_percent:80,manager_name:"赵六",plan_start:"2024-02-16",plan_end:"2024-03-15"}]},{id:3,task_no:"1.3",name:"外板及甲板矫正",level:1,status:"not_started",progress_percent:0,manager_name:"王五",plan_start:"2024-03-01",plan_end:"2024-05-15"}]),x=T(()=>{const s=[],t=c("2024-01-01"),_=c("2024-06-30");let l=t;for(;l.isBefore(_)||l.isSame(_);)s.push(l.format("YYYY-MM-DD")),l=l.add(1,"day");return s}),N=s=>c(s).format("MM-DD"),j=s=>{const t=c(s).day();return t===0||t===6},A=s=>{const t=c(s.plan_start),_=c(s.plan_end),l=c(x.value[0]),u=t.diff(l,"day")*40,y=_.diff(t,"day")*40+40;return{left:`${u}px`,width:`${y}px`}};return(s,t)=>{const _=i("el-option"),l=i("el-select"),u=i("el-radio-button"),y=i("el-radio-group"),L=i("ArrowLeft"),D=i("el-icon"),Y=i("el-button"),R=i("ArrowDown");return n(),o("div",q,[a("div",E,[d(l,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),placeholder:"选择项目",style:{width:"200px"}},{default:r(()=>[(n(!0),o(f,null,g(M.value,e=>(n(),$(_,{key:e.id,label:e.yacht_name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),d(y,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e)},{default:r(()=>[d(u,{label:"day"},{default:r(()=>[...t[3]||(t[3]=[v("日",-1)])]),_:1}),d(u,{label:"week"},{default:r(()=>[...t[4]||(t[4]=[v("周",-1)])]),_:1}),d(u,{label:"month"},{default:r(()=>[...t[5]||(t[5]=[v("月",-1)])]),_:1})]),_:1},8,["modelValue"]),d(Y,{onClick:t[2]||(t[2]=e=>s.$router.back())},{default:r(()=>[d(D,null,{default:r(()=>[d(L)]),_:1}),t[6]||(t[6]=v(" 返回列表 ",-1))]),_:1})]),a("div",{class:"gantt-container",ref_key:"ganttRef",ref:S},[a("div",G,[t[7]||(t[7]=F('<div class="task-header" data-v-23e4f658><div class="cell" data-v-23e4f658>序号</div><div class="cell task-name" data-v-23e4f658>任务名称</div><div class="cell" data-v-23e4f658>负责人</div><div class="cell" data-v-23e4f658>进度</div></div>',1)),a("div",I,[(n(!0),o(f,null,g(V.value,e=>{var C;return n(),o("div",{key:e.id,class:k(["task-row",{"task-completed":e.status==="completed"}])},[a("div",P,p(e.task_no),1),a("div",W,[a("span",{style:w({paddingLeft:`${(e.level-1)*20}px`})},[(C=e.children)!=null&&C.length?(n(),$(D,{key:0,class:"expand-icon"},{default:r(()=>[d(R)]),_:1})):B("",!0),v(" "+p(e.name),1)],4)]),a("div",H,p(e.manager_name),1),a("div",J,p(e.progress_percent)+"%",1)],2)}),128))])]),a("div",K,[a("div",O,[(n(!0),o(f,null,g(x.value,e=>(n(),o("div",{key:e,class:k(["date-cell",{weekend:j(e)}])},p(N(e)),3))),128))]),a("div",Q,[(n(!0),o(f,null,g(V.value,e=>(n(),o("div",{key:e.id,class:"timeline-row"},[e.plan_start&&e.plan_end?(n(),o("div",{key:0,class:k(["task-bar",`status-${e.status}`]),style:w(A(e))},[a("div",{class:"task-progress",style:w({width:`${e.progress_percent}%`})},null,4),a("span",X,p(e.name),1)],6)):B("",!0)]))),128))])])],512)])}}}),se=U(Z,[["__scopeId","data-v-23e4f658"]]);export{se as default};
//# sourceMappingURL=gantt-m3Od0QhB.js.map
